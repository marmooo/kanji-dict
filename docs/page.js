function loadConfig(){localStorage.getItem("darkMode")==1&&(document.documentElement.dataset.theme="dark")}function toggleDarkMode(){localStorage.getItem("darkMode")==1?(localStorage.setItem("darkMode",0),delete document.documentElement.dataset.theme):(localStorage.setItem("darkMode",1),document.documentElement.dataset.theme="dark")}function prev(){animator.stop().finish(),currPos-=1,currPos<1&&(currPos=1);let a=1;while(!0){const b=kanjiSvg.getElementById("kvg:"+kanjiId+"-s"+a);if(b)a<currPos?b.setAttribute("stroke","black"):a==currPos?b.setAttribute("stroke","red"):b.setAttribute("stroke","none");else break;a+=1}}function stop(){animator.stop().finish(),currPos=0;let a=1;while(!0){const b=kanjiSvg.getElementById("kvg:"+kanjiId+"-s"+a);if(b)b.setAttribute("stroke","black");else break;a+=1}document.getElementById("stop").classList.add("d-none"),document.getElementById("play").classList.remove("d-none")}function play(){animator.reset().play();let a=1;while(!0){const b=kanjiSvg.getElementById("kvg:"+kanjiId+"-s"+a);if(b)b.setAttribute("stroke","black");else break;a+=1}document.getElementById("stop").classList.remove("d-none"),document.getElementById("play").classList.add("d-none")}function next(){animator.stop().finish(),currPos<kakusu&&(currPos+=1);let a=1;while(!0){const b=kanjiSvg.getElementById("kvg:"+kanjiId+"-s"+a);if(b)a<currPos?b.setAttribute("stroke","black"):a==currPos?b.setAttribute("stroke","red"):b.setAttribute("stroke","none");else break;a+=1}}function getKakusu(){let a=1;while(!0){const b=kanjiSvg.getElementById("kvg:"+kanjiId+"-s"+a);if(b)a+=1;else break}return a-1}function addHitujun(){const a=document.getElementById("hitujun");for(let c=1;c<=kakusu;c++){const b=kanjiSvg.cloneNode(!0);b.setAttribute("width",64),b.setAttribute("height",64),b.removeAttribute("id");for(let a=c+1;a<=kakusu;a++){const e="kvg:"+kanjiId+"-s"+a,d=b.querySelector('[id="'+e+'"]');d.setAttribute("stroke","lightgray"),d.removeAttribute("id")}a.appendChild(b)}}function addAnimation(){animator=new Vivus("kanji",{type:"oneByOne",duration:kakusu*50},()=>{setTimeout(addAnimation,2e3)})}function init(a,b){a.onload=()=>{kanjiSvg=a.contentDocument.querySelector("svg"),kakusu=getKakusu(),addHitujun(),addAnimation()},a.data=`/kanjivg/${b}.svg`,a.classList.remove("d-none")}loadConfig();const kanji=document.getElementById("kanji"),kanjiId=kanji.dataset.id;let animator,kanjiSvg,kakusu,currPos=1;init(kanji,kanjiId),document.getElementById("toggleDarkMode").onclick=toggleDarkMode,document.getElementById("next").onclick=next,document.getElementById("play").onclick=play,document.getElementById("stop").onclick=stop,document.getElementById("prev").onclick=prev