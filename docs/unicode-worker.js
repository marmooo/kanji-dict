async function getCharBuffer(e){const t=4,s=new OffscreenCanvas(t,t),n=s.getContext("2d",{alpha:!1});n.font=`${t}px sans-serif`,n.fillStyle="white",n.fillText(e,0,t);const o=await s.convertToBlob(),i=await o.arrayBuffer();return i}function buffersEqual(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;const n=new Uint8Array(e),s=new Uint8Array(t);for(let e=0;e<n.length;e++)if(n[e]!==s[e])return!1;return!0}let cachedRefBuffer=null;self.onmessage=async e=>{cachedRefBuffer||(cachedRefBuffer=await getCharBuffer("ï¿¿"));const{chars:t}=e.data,n=await Promise.all(t.map(async e=>{const t=await getCharBuffer(e),n=!buffersEqual(t,cachedRefBuffer);return{char:e,supported:n}}));self.postMessage(n)}